### ================ CONFIGURA√á√ÉO ================
@baseUrl = http://localhost:3000
@contentType = application/json

### ================ AUTENTICA√á√ÉO ================

### üîê Login usu√°rio comum 1
POST {{baseUrl}}/auth/signIn
Content-Type: {{contentType}}

{
   "email": "lucas@example.com",
    "password": "teste123"
}

@userToken = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6Imx1Y2FzQGV4YW1wbGUuY29tIiwic3ViIjoiZGE1NjFjNTItYzhiMS00NWNmLTllN2QtNDA1ZDMyOWFhOTI3Iiwicm9sZSI6InVzZXIiLCJpYXQiOjE3NTkwODQ4NzksImV4cCI6MTc1OTA4ODQ3OX0.SOnSSf4RrVZZ6BdWIZrbiU2qEvPND9GIvcsegELF6C4

### üîê Login usu√°rio comum 2
POST {{baseUrl}}/auth/signIn
Content-Type: {{contentType}}

{
  "email": "user2@example.com", 
  "password": "user123"
}

@user2Token = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6Imx1Y2FzQGV4YW1wbGUuY29tIiwic3ViIjoiZGE1NjFjNTItYzhiMS00NWNmLTllN2QtNDA1ZDMyOWFhOTI3Iiwicm9sZSI6InVzZXIiLCJpYXQiOjE3NTkwODAyMDMsImV4cCI6MTc1OTA4MzgwM30.7nw5Tz6vdxt9OQk-IFBOb-bEjMYXoYrZ7MtwwX5zur4

### üîê Login admin
POST {{baseUrl}}/auth/signIn
Content-Type: {{contentType}}

{
  "email": "admin@example.com",
  "password": "admin123"
}

@adminToken = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6ImFkbWluQGV4YW1wbGUuY29tIiwic3ViIjoiZGUyYzkwZDYtZDJiNC00NzMxLTlhZDktNGViYTRmMDBiMTQ5Iiwicm9sZSI6ImFkbWluIiwiaWF0IjoxNzU5MDgxOTkxLCJleHAiOjE3NTkwODU1OTF9.NoKhyAjDijLuRnzY9X1tSldhJ2TOKmntS5-LYmC4akU
### ================ 1. CRIAR PERFIL ================

### ‚úÖ Criar perfil completo
POST {{baseUrl}}/profile
Authorization: Bearer {{userToken}}
Content-Type: {{contentType}}

{
  "userName": "lucas",
  "bio": "Desenvolvedor apaixonado por tecnologia e inova√ß√£o",
  "avatarUrl": "https://example.com/avatar/joao.jpg",
  "capaUrl": "https://example.com/capa/joao.jpg",
  "isPublic": true
}

### ‚úÖ Criar perfil m√≠nimo (s√≥ userName)
POST {{baseUrl}}/profile
Authorization: Bearer {{user2Token}}
Content-Type: {{contentType}}

{
  "userName": "maria_dev"
}

### ‚ùå Tentar criar perfil duplicado (deve falhar)
POST {{baseUrl}}/profile
Authorization: Bearer {{userToken}}
Content-Type: {{contentType}}

{
  "userName": "joao_silva_novo",
  "bio": "Segundo perfil"
}

### ‚ùå Tentar criar com userName j√° existente (deve falhar)
POST {{baseUrl}}/profile
Authorization: Bearer {{user2Token}}
Content-Type: {{contentType}}

{
  "userName": "joao_silva"
}

### ‚ùå Criar perfil com dados inv√°lidos (deve falhar)
POST {{baseUrl}}/profile
Authorization: Bearer {{userToken}}
Content-Type: {{contentType}}

{
  "userName": "ab",
  "bio": "Bio muito longa que vai passar do limite de 200 caracteres. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.",
  "avatarUrl": "url-invalida",
  "isPublic": "nao-booleano"
}

### ================ 2. VER PR√ìPRIO PERFIL ================

### ‚úÖ Ver meu perfil
GET {{baseUrl}}/profile/my-profile
Authorization: Bearer {{userToken}}

### ‚úÖ Ver meu perfil (user2)
GET {{baseUrl}}/profile/my-profile
Authorization: Bearer {{user2Token}}

### ‚ùå Ver perfil sem estar logado (deve falhar)
GET {{baseUrl}}/profile/my-profile

### ================ 3. VER PERFIL DE OUTROS ================

@userId1 = 75a8ac27-f307-492c-a8d0-8dabcd39b6ce
@userId2 = 

### ‚úÖ Ver perfil p√∫blico de outro usu√°rio
GET {{baseUrl}}/profile/{{userId1}}
Authorization: Bearer {{user2Token}}

### ‚ùå Tentar ver perfil privado (deve falhar se isPublic = false)
GET {{baseUrl}}/profile/{{userId2}}
Authorization: Bearer {{userToken}}

### ‚ùå Ver perfil de usu√°rio inexistente (deve falhar)
GET {{baseUrl}}/profile/00000000-0000-0000-0000-000000000000
Authorization: Bearer {{userToken}}

### ================ 4. LISTAR PERFIS P√öBLICOS ================

### ‚úÖ Listar todos os perfis p√∫blicos
GET {{baseUrl}}/profile/public
Authorization: Bearer {{userToken}}

### ‚úÖ Listar perfis p√∫blicos (admin)
GET {{baseUrl}}/profile/public
Authorization: Bearer {{adminToken}}

### ================ 5. PESQUISAR PERFIS ================

### ‚úÖ Buscar todos os perfis p√∫blicos (sem termo)
GET {{baseUrl}}/profile/search
Authorization: Bearer {{userToken}}

### ‚úÖ Buscar por userName espec√≠fico
GET {{baseUrl}}/profile/search?query=luc
Authorization: Bearer {{userToken}}

### ‚úÖ Buscar por userName parcial
GET {{baseUrl}}/profile/search?query=cas
Authorization: Bearer {{userToken}}

### ‚úÖ Buscar por userName inexistente (retorna array vazio)
GET {{baseUrl}}/profile/search?query=naoexiste123
Authorization: Bearer {{userToken}}

### ‚úÖ Buscar com espa√ßos (deve funcionar)
GET {{baseUrl}}/profile/search?query=    lucas 
Authorization: Bearer {{userToken}}

### ================ 6. PESQUISA ADMIN ================

### üëë Admin busca todos os perfis (incluindo privados)
GET {{baseUrl}}/profile/admin/search
Authorization: Bearer {{adminToken}}

### üëë Admin busca perfil espec√≠fico (incluindo privados)
GET {{baseUrl}}/profile/admin/search?query=maria
Authorization: Bearer {{adminToken}}

### ‚ùå Usu√°rio comum tenta pesquisa admin (deve falhar)
GET {{baseUrl}}/profile/admin/search
Authorization: Bearer {{userToken}}

### ================ 7. ALTERAR PRIVACIDADE ================

### üîí Tornar perfil PRIVADO
PATCH {{baseUrl}}/profile/visibility
Authorization: Bearer {{userToken}}
Content-Type: {{contentType}}

{
  "isPublic": false
}

### üîç Verificar se perfil desapareceu da busca p√∫blica
GET {{baseUrl}}/profile/search?query=joao
Authorization: Bearer {{user2Token}}

### üëë Admin ainda consegue ver perfil privado
GET {{baseUrl}}/profile/admin/search?query=joao
Authorization: Bearer {{adminToken}}

### üåê Tornar perfil P√öBLICO novamente
PATCH {{baseUrl}}/profile/visibility
Authorization: Bearer {{userToken}}
Content-Type: {{contentType}}

{
  "isPublic": true
}

### üîç Verificar se perfil voltou na busca p√∫blica
GET {{baseUrl}}/profile/search?query=joao
Authorization: Bearer {{user2Token}}

### ‚ùå Alterar privacidade com dados inv√°lidos (deve falhar)
PATCH {{baseUrl}}/profile/visibility
Authorization: Bearer {{userToken}}
Content-Type: {{contentType}}

{
  "isPublic": "maybe"
}

### ================ 8. ATUALIZAR PERFIL ================

### ‚úÖ Atualizar bio
PATCH {{baseUrl}}/profile/update-profile
Authorization: Bearer {{userToken}}
Content-Type: {{contentType}}

{
  "bio": "Nova bio atualizada com informa√ß√µes mais recentes"
}

### ‚úÖ Atualizar userName
PATCH {{baseUrl}}/profile/update-profile
Authorization: Bearer {{userToken}}
Content-Type: {{contentType}}

{
  "userName": "joao_dev_2024"
}

### ‚úÖ Atualizar m√∫ltiplos campos
PATCH {{baseUrl}}/profile/update-profile
Authorization: Bearer {{userToken}}
Content-Type: {{contentType}}

{
  "bio": "Full Stack Developer | React | Node.js | TypeScript",
  "avatarUrl": "https://example.com/new-avatar.jpg",
  "capaUrl": "https://example.com/new-capa.jpg"
}

### ‚ùå Tentar atualizar com userName j√° existente (deve falhar)
PATCH {{baseUrl}}/profile/update-profile
Authorization: Bearer {{user2Token}}
Content-Type: {{contentType}}

{
  "userName": "joao_dev_2024"
}

### ‚ùå Atualizar com dados inv√°lidos (deve falhar)
PATCH {{baseUrl}}/profile/update-profile
Authorization: Bearer {{userToken}}
Content-Type: {{contentType}}

{
  "userName": "x",
  "bio": "Bio extremamente longa que vai passar do limite de 200 caracteres permitidos pela valida√ß√£o. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.",
  "avatarUrl": "not-a-valid-url"
}

### ================ 9. CEN√ÅRIOS COM USU√ÅRIOS BANIDOS ================

### üëë Admin bane um usu√°rio
@userIdToBan = COLE_USER_ID_AQUI
PATCH {{baseUrl}}/user/admin/{{userIdToBan}}/ban
Authorization: Bearer {{adminToken}}
Content-Type: {{contentType}}

{
  "reason": "Comportamento inadequado no perfil"
}

### üîç Verificar se perfil de usu√°rio banido n√£o aparece na busca
GET {{baseUrl}}/profile/search
Authorization: Bearer {{userToken}}

### üëë Mas admin ainda v√™ perfil de usu√°rio banido
GET {{baseUrl}}/profile/admin/search
Authorization: Bearer {{adminToken}}

### ‚ùå Usu√°rio banido tenta atualizar perfil (deve falhar)
PATCH {{baseUrl}}/profile/update-profile
Authorization: Bearer TOKEN_USUARIO_BANIDO
Content-Type: {{contentType}}

{
  "bio": "Tentando atualizar mesmo banido"
}

### ================ 10. DELETAR PERFIL ================

### ‚ö†Ô∏è Deletar perfil (a√ß√£o irrevers√≠vel)
DELETE {{baseUrl}}/profile/delete-profile
Authorization: Bearer {{user2Token}}

### üîç Verificar se perfil sumiu da busca
GET {{baseUrl}}/profile/search?query=maria
Authorization: Bearer {{userToken}}

### ‚ùå Tentar ver perfil deletado (deve falhar)
GET {{baseUrl}}/profile/my-profile
Authorization: Bearer {{user2Token}}

### ‚ùå Tentar deletar perfil inexistente (deve falhar)
DELETE {{baseUrl}}/profile/delete-profile
Authorization: Bearer {{user2Token}}


### üîß Tornar o perfil p√∫blico (corrigir o valor)
PATCH {{baseUrl}}/profile/update-visibility
Authorization: Bearer {{userToken}}
Content-Type: {{contentType}}

{
  "isPublic": true
}

### ================ 11. CEN√ÅRIOS DE ERRO ================

### ‚ùå Acessar rotas sem token
GET {{baseUrl}}/profile/my-profile

### ‚ùå Acessar rota admin sem ser admin
GET {{baseUrl}}/profile/admin/search
Authorization: Bearer {{userToken}}

### ‚ùå Token inv√°lido
GET {{baseUrl}}/profile/my-profile
Authorization: Bearer token-invalido

### ‚ùå Tentar criar perfil para usu√°rio inexistente
POST {{baseUrl}}/profile
Authorization: Bearer token-de-usuario-inexistente
Content-Type: {{contentType}}

{
  "userName": "perfil_orfao"
}

### ================ 12. ESTAT√çSTICAS (BONUS) ================

### üìä Ver todos os usu√°rios (para pegar IDs)
GET {{baseUrl}}/user/profile
Authorization: Bearer {{adminToken}}

### üìä Estat√≠sticas de perfis
GET {{baseUrl}}/profile/public
Authorization: Bearer {{adminToken}}

### ================ RESUMO DE VALIDA√á√ïES ================
# ‚úÖ Criar perfil: OK
# ‚úÖ Ver pr√≥prio perfil: OK
# ‚úÖ Ver perfil p√∫blico de outros: OK
# ‚ùå Ver perfil privado: FAIL
# ‚úÖ Listar perfis p√∫blicos: OK
# ‚úÖ Buscar perfis: OK
# üëë Admin v√™ todos: OK
# ‚ùå User tenta admin: FAIL
# ‚úÖ Alterar privacidade: OK
# ‚úÖ Atualizar perfil: OK
# ‚ùå userName duplicado: FAIL
# ‚úÖ Deletar perfil: OK
# ‚ùå Usu√°rio banido: HIDDEN
# ‚ùå Dados inv√°lidos: FAIL
# ‚ùå Sem autentica√ß√£o: FAIL